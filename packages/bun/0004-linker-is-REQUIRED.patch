From c03d1d499f85f06a20d01f5510aaf95c02303d02 Mon Sep 17 00:00:00 2001
From: Elliana May <me@mause.me>
Date: Thu, 1 Jan 2026 22:23:09 +0800
Subject: [PATCH 4/8] linker is REQUIRED

---
 cmake/targets/BuildBun.cmake | 2 +-
 cmake/tools/SetupLLVM.cmake  | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/cmake/targets/BuildBun.cmake b/cmake/targets/BuildBun.cmake
index 6b23266ade..0baa712e6b 100644
--- a/cmake/targets/BuildBun.cmake
+++ b/cmake/targets/BuildBun.cmake
@@ -1136,7 +1136,7 @@ if(LINUX)
   endif()
 
   target_link_options(${bun} PUBLIC
-    --ld-path=${LLD_PROGRAM}
+    --ld-path="${LLD_PROGRAM}-FROGS"
     -fno-pic
     -Wl,-no-pie
     -Wl,--as-needed
diff --git a/cmake/tools/SetupLLVM.cmake b/cmake/tools/SetupLLVM.cmake
index a250342018..3964d8a683 100644
--- a/cmake/tools/SetupLLVM.cmake
+++ b/cmake/tools/SetupLLVM.cmake
@@ -80,6 +80,7 @@ macro(find_llvm_command variable command)
     COMMAND ${commands}
     PATHS ${LLVM_PATHS}
     VERSION ">=${LLVM_VERSION_MAJOR}.1.0 <${LLVM_VERSION_NEXT_MAJOR}.0.0"
+    REQUIRED
   )
   list(APPEND CMAKE_ARGS -D${variable}=${${variable}})
 endmacro()
@@ -130,7 +131,7 @@ else()
   endif()
   find_llvm_command(CMAKE_RANLIB llvm-ranlib)
   if(LINUX)
-    find_llvm_command(LLD_PROGRAM ld.lld)
+    set(LLD_PROGRAM /home/builder/.termux-build/_cache/android-r29-api-24-v3/bin/ld.lld)
     # Ensure vendor dependencies use lld instead of ld
     list(APPEND CMAKE_ARGS -DCMAKE_EXE_LINKER_FLAGS=--ld-path=${LLD_PROGRAM})
     list(APPEND CMAKE_ARGS -DCMAKE_SHARED_LINKER_FLAGS=--ld-path=${LLD_PROGRAM})
